<!doctype html>
<html>

  <head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">


	<style>

	  svg {

	    display: block;
	    margin: auto;
	   
	    margin-top: 100px;


	  }

	  #result{
		text-align:center;
		font-size: 40px;
		font-family: Verdana;
		padding-top: 40px;
	  }


	#reset button {
  		border: 2px solid black;
  		background-color: white;
  		color: black;
  		padding: 14px 28px;
  		font-size: 16px;
  		cursor: pointer;

		border-color: #4CAF50;
  		color: green;

	}

	#reset {
		text-align: center;
		padding-top: 40px;

	}



	</style>
	

  </head>

  <body>




	<svg id="board" width="300" height="300">



  	  <rect onclick="handleClick(this)" width="100" height="100" style="fill:white;" />
  	  <rect onclick="handleClick(this)" x="100" width="100" height="100" style="fill:white;" />
  	  <rect onclick="handleClick(this)" x="200" width="100" height="100" style="fill:white;" />


  	  <rect onclick="handleClick(this)" y="100" width="100" height="100" style="fill:white;" />
  	  <rect onclick="handleClick(this)" y="100" x="100" width="100" height="100" style="fill:white;" />
  	  <rect onclick="handleClick(this)" y="100" x="200" width="100" height="100" style="fill:white;" />

  	  <rect onclick="handleClick(this)" y="200" width="100" height="100" style="fill:white;" />
  	  <rect onclick="handleClick(this)" y="200" x="100" width="100" height="100" style="fill:white;" />
  	  <rect onclick="handleClick(this)" y="200" x="200" width="100" height="100" style="fill:white;" />


	  <line onclick="handleClick()" x1="100" y1="0" x2="100" y2="300" style="stroke:#59524e;stroke-width:2" />
	  <line onclick="handleClick()" x1="200" y1="0" x2="200" y2="300" style="stroke:#59524e;stroke-width:2" />
	  <line onclick="handleClick()" x1="0" y1="100" x2="300" y2="100" style="stroke:#59524e;stroke-width:2" />
	  <line onclick="handleClick()" x1="0" y1="200" x2="300" y2="200" style="stroke:#59524e;stroke-width:2" />



<!--
	<circle cx="50" cy="50" r="40" stroke="black" stroke-width="3" fill="white" />

	<line x1="15" y1="15" x2="85" y2="85" style="stroke:black;stroke-width:3" /><line x1="85" y1="15" x2="15" y2="85" style="stroke:black;stroke-width:3" />
-->




	</svg>


	<div id="result">

	</div>

	<div id="reset">

	</div>




	<script>



	let board = [	
			'-', '-', '-',
			'-', '-', '-',
			'-', '-', '-'
			];



	function isXWinner(){

	  if(board[0] == 'x' && board[1] == 'x' && board[2] == 'x'){
	    return true;
	  }
	  else if(board[3] == 'x' && board[4] == 'x' && board[5] == 'x'){
	    return true;
	  }
	  else if(board[6] == 'x' && board[7] == 'x' && board[8] == 'x'){
	    return true;
	  }
	  else if(board[0] == 'x' && board[3] == 'x' && board[6] == 'x'){
	    return true;
	  }
	  else if(board[1] == 'x' && board[4] == 'x' && board[7] == 'x'){
	    return true;
	  }
	  else if(board[2] == 'x' && board[5] == 'x' && board[8] == 'x'){
	    return true;
	  }
	  else if(board[0] == 'x' && board[4] == 'x' && board[8] == 'x'){
	    return true;
	  }
	  else if(board[2] == 'x' && board[4] == 'x' && board[6] == 'x'){
	    return true;
	  }
	  else{
	    return false;
	  }	
	  



	}


	function isOWinner(){



	  if(board[0] == 'o' && board[1] == 'o' && board[2] == 'o'){
	    return true;
	  }
	  else if(board[3] == 'o' && board[4] == 'o' && board[5] == 'o'){
	    return true;
	  }
	  else if(board[6] == 'o' && board[7] == 'o' && board[8] == 'o'){
	    return true;
	  }
	  else if(board[0] == 'o' && board[3] == 'o' && board[6] == 'o'){
	    return true;
	  }
	  else if(board[1] == 'o' && board[4] == 'o' && board[7] == 'o'){
	    return true;
	  }
	  else if(board[2] == 'o' && board[5] == 'o' && board[8] == 'o'){
	    return true;
	  }
	  else if(board[0] == 'o' && board[4] == 'o' && board[8] == 'o'){
	    return true;
	  }
	  else if(board[2] == 'o' && board[4] == 'o' && board[6] == 'o'){
	    return true;
	  }
	  else{
	    return false;
	  }	
	

	}


	function isGameFinished(){

	  
	  if(isXWinner() || isOWinner()){

	    return true;

	   }



	   let countBlank = 0;

	   for(let i=0; i<9; i++){
		if(board[i] == '-'){
		  countBlank += 1;
		}
	   }
	  

	   if(countBlank == 0){
		return true;
	    }



	    return false;
	}



	let p1turn = true;

	let gameover = false;


	function convertXYToArrayPosition(x, y){

	  if (x == 0 && y== 0){
	    return 0;
	  }
	  else if (x == 100 && y== 0){
	    return 1;
	  }
	  else if (x == 200 && y== 0){
	    return 2;
	  }
	  else if (x == 0 && y== 100){
	    return 3;
	  }
	  else if (x == 100 && y== 100){
	    return 4;
	  }
	  else if (x == 200 && y== 100){
	    return 5;
	  }
	  else if (x == 0 && y== 200){
	    return 6;
	  }
	  else if (x == 100 && y== 200){
	    return 7;
	  }
	  else if (x == 200 && y== 200){
	    return 8;
	  }


	  

	}


	function resetGame(){
		gameover = false;
		
		board = [	
			'-', '-', '-',
			'-', '-', '-',
			'-', '-', '-'
			];

		p1turn = true;


		let container = document.getElementById("board");
		let elements = container.getElementsByClassName("move");

		while (elements[0]) {
    			elements[0].parentNode.removeChild(elements[0]);
		}


		document.getElementById("reset").innerHTML = "";
		document.getElementById("result").innerHTML = "";


	}

	  function handleClick(element){


	    if(gameover){
		return;
	    }


	    let x = element.x.baseVal.value;
	    let y = element.y.baseVal.value;



	    if(board[convertXYToArrayPosition(x, y)] != '-'){
		 return;
	    }



	    let cx = Number(x) + 50;
	    let cy = Number(y) + 50;

	    let x1 = Number(x) + 15;
	    let x2 = Number(x) + 85;

	    let y1 = Number(y) + 15;
	    let y2 = Number(y) + 85;



	    let xx1 = Number(x) + 85;
	    let xx2 = Number(x) + 15;

	    let yy1 = Number(y) + 15;
	    let yy2 = Number(y) + 85;


	    if (p1turn){
	      document.getElementById("board").innerHTML += '<circle class="move" cx="' + cx + '" cy="' + cy + '" r="40" stroke="black" stroke-width="3" fill="white" />';
	

		board[convertXYToArrayPosition(x, y)] = 'o';

		if(isGameFinished()){

		  if(isXWinner()){
			document.getElementById("result").innerText = "X Won";

		  }
		  else if(isOWinner()){
			document.getElementById("result").innerText = "O Won";

		  }
		  else{
			document.getElementById("result").innerText = "Draw";

		  }


		  gameover = true;

		}	


	    }
	    else{
	      document.getElementById("board").innerHTML += '<line class="move" x1="'+x1+'" y1="'+y1+'" x2="'+x2+'" y2="'+y2+'" style="stroke:black;stroke-width:3" /><line class="move" x1="'+xx1+'" y1="'+yy1+'" x2="'+xx2+'" y2="'+yy2+'" style="stroke:black;stroke-width:3" />';

		board[convertXYToArrayPosition(x, y)] = 'x';

		if(isGameFinished()){

		  if(isXWinner()){
			document.getElementById("result").innerText = "X Won";

		  }
		  else if(isOWinner()){
			document.getElementById("result").innerText = "O Won";

		  }
		  else{
			document.getElementById("result").innerText = "Draw";

		  }

		  gameover = true;

		}	


	    }



		if(gameover){
			document.getElementById("reset").innerHTML = "<button onclick='resetGame()'>Reset</button>";
		}
	    

	   //alert(x + " " + y);



	     if(p1turn){
		p1turn = false;
	     }
	     else{
		p1turn = true;
	     }



	  }



	</script>



  </body>


</html>

